(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';(function(){var a=require('../package.json');window.ChatEngineCore.plugin[a.name]=require('../src/plugin.js')})();

},{"../package.json":2,"../src/plugin.js":3}],2:[function(require,module,exports){
module.exports={
  "name": "chat-engine-open-graph",
  "version": "0.0.1",
  "main": "src/plugin.js",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/pubnub/chat-engine-open-graph.git"
  },
  "keywords": [
    "pubnub",
    "chat-engine",
    "open-graph",
    "realtime"
  ],
  "author": "Manuel Fernando",
  "bugs": {
    "url": "https://github.com/pubnub/chat-engine-open-graph/issues"
  },
  "homepage": "https://github.com/pubnub/chat-engine-open-graph#readme",
  "browserify": {
    "transform": [
      [
        "babelify",
        {
          "presets": [
            "es2015",
            "minify"
          ]
        }
      ]
    ]
  },
  "devDependencies": {
    "babel-core": "^6.26.3",
    "babel-minify": "^0.4.3",
    "babel-preset-es2015": "^6.24.1",
    "babelify": "^8.0.0"
  }
}

},{}],3:[function(require,module,exports){
'use strict';module.exports=function(a){var b=a.api,c=b===void 0?function(a){return'http://localhost:3001/?q='+a}:b,d=/(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/;return{middleware:{on:{message:function f(a,b){var e=a.data.text.match(d);e&&0<e.length&&request(c(encodeURI(e[0])),'GET',{"Access-Control-Allow-Origin":'*'}).then(function(b){a.data.text=a.data.text.replace(d,''),a.data.metadata=b.body}).catch(function(){}),b(null,a)}}}}};function request(a,b,c){return new Promise(function(d,e){var f=new XMLHttpRequest,g=!1;for(var h in c=c||{},f.open(b,a),c.headers)({}).hasOwnProperty.call(c.headers,h)&&(h=h.toLowerCase(),g='content-type'===h||g,f.setRequestHeader(h,c.headers[h]));g||f.setRequestHeader('Content-type','application/x-www-form-urlencoded'),f.onload=function(){if(200<=f.status&&300>f.status){var a;try{a=JSON.parse(f.response)}catch(b){a=f.response}d(a)}else e({status:f.status,statusText:f.statusText})},f.send(JSON.stringify(c.body))})}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy5udm0vdmVyc2lvbnMvbm9kZS92OC4xMS4yL2xpYi9ub2RlX21vZHVsZXMvY2hhdC1lbmdpbmUtcGx1Z2luL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIudG1wL3dyYXAuanMiLCJwYWNrYWdlLmpzb24iLCJzcmMvcGx1Z2luLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO2FDQUEsQ0FBQyxVQUFXLENBRVIsR0FBTSxHQUFNLFFBQVEsaUJBQVIsQ0FBWixDQUNBLE9BQU8sY0FBUCxDQUFzQixNQUF0QixDQUE2QixFQUFJLElBQWpDLEVBQXlDLFFBQVEsa0JBQVIsQ0FFNUMsQ0FMRCxHOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7YUN2Q0EsT0FBTyxPQUFQLENBQWlCLFNBQUMsQ0FBRCxDQUFZLE9BRWtDLENBRmxDLENBRW5CLEdBRm1CLENBRW5CLENBRm1CLFlBRWIsU0FBQyxDQUFELG9DQUFxQyxDQUFyQyxDQUZhLEdBSXJCLEVBQVEsMkRBSmEsQ0FNM0IsTUFBTyxDQUNMLFdBQVksQ0FDVixHQUFJLENBQ0YsUUFBUyxXQUFVLENBQVYsQ0FBbUIsQ0FBbkIsQ0FBeUIsQ0FDaEMsR0FBSSxHQUFJLEVBQVEsSUFBUixDQUFhLElBQWIsQ0FBa0IsS0FBbEIsQ0FBd0IsQ0FBeEIsQ0FBUixDQUNJLEdBQWdCLENBQVgsR0FBRSxNQUZxQixFQUc5QixRQUFRLEVBQUksVUFBVSxFQUFFLENBQUYsQ0FBVixDQUFKLENBQVIsQ0FBOEIsS0FBOUIsQ0FBcUMsQ0FDbkMsOEJBQStCLEdBREksQ0FBckMsRUFFRyxJQUZILENBRVEsU0FBQyxDQUFELENBQVMsQ0FDYixFQUFRLElBQVIsQ0FBYSxJQUFiLENBQW9CLEVBQVEsSUFBUixDQUFhLElBQWIsQ0FBa0IsT0FBbEIsQ0FBMEIsQ0FBMUIsQ0FBaUMsRUFBakMsQ0FEUCxDQUViLEVBQVEsSUFBUixDQUFhLFFBQWIsQ0FBd0IsRUFBSSxJQUMvQixDQUxELEVBS0csS0FMSCxDQUtTLFVBQVcsQ0FFbkIsQ0FQRCxDQUg4QixDQVloQyxFQUFLLElBQUwsQ0FBVyxDQUFYLENBQ0QsQ0FkQyxDQURNLENBRFAsQ0FvQlIsQyxDQWNELFFBQVMsUUFBVCxDQUFpQixDQUFqQixDQUFzQixDQUF0QixDQUE4QixDQUE5QixDQUF1QyxDQUNuQyxNQUFPLElBQUksUUFBSixDQUFZLFNBQUMsQ0FBRCxDQUFVLENBQVYsQ0FBcUIsSUFDOUIsR0FBTSxHQUFJLGVBRG9CLENBRWhDLElBRmdDLENBTXBDLElBQUssR0FBSSxFQUFULEdBSEEsR0FBVSxHQUFXLEVBR3JCLENBRkEsRUFBSSxJQUFKLENBQVMsQ0FBVCxDQUFpQixDQUFqQixDQUVBLENBQW1CLEVBQVEsT0FBM0IsQ0FDUSxLQUFHLGNBQUgsQ0FBa0IsSUFBbEIsQ0FBdUIsRUFBUSxPQUEvQixDQUF3QyxDQUF4QyxDQURSLEdBRVEsRUFBUyxFQUFPLFdBQVAsRUFGakIsQ0FHUSxFQUE4QixjQUFYLElBQW5CLEVBQXNELENBSDlELENBSVEsRUFBSSxnQkFBSixDQUFxQixDQUFyQixDQUE2QixFQUFRLE9BQVIsQ0FBZ0IsQ0FBaEIsQ0FBN0IsQ0FKUixFQVFLLENBZCtCLEVBZWhDLEVBQUksZ0JBQUosQ0FBcUIsY0FBckIsQ0FBcUMsbUNBQXJDLENBZmdDLENBa0JwQyxFQUFJLE1BQUosQ0FBYSxVQUFXLENBQ3BCLEdBQWtCLEdBQWQsSUFBSSxNQUFKLEVBQWtDLEdBQWIsR0FBSSxNQUE3QixDQUEyQyxDQUN2QyxHQUFJLEVBQUosQ0FDQSxHQUFJLENBQ0EsRUFBVyxLQUFLLEtBQUwsQ0FBVyxFQUFJLFFBQWYsQ0FDZCxDQUFDLE1BQU8sQ0FBUCxDQUFVLENBQ1IsRUFBVyxFQUFJLFFBQ2xCLENBQ0QsRUFBUSxDQUFSLENBQ0gsQ0FSRCxJQVNJLEdBQU8sQ0FDSCxPQUFRLEVBQUksTUFEVCxDQUVILFdBQVksRUFBSSxVQUZiLENBQVAsQ0FLUCxDQWpDbUMsQ0FtQ3BDLEVBQUksSUFBSixDQUFTLEtBQUssU0FBTCxDQUFlLEVBQVEsSUFBdkIsQ0FBVCxDQUNILENBcENNLENBcUNWIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgY29uc3QgcGtnID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJyk7XG4gICAgd2luZG93LkNoYXRFbmdpbmVDb3JlLnBsdWdpbltwa2cubmFtZV0gPSByZXF1aXJlKCcuLi9zcmMvcGx1Z2luLmpzJyk7XG5cbn0pKCk7XG4iLCJtb2R1bGUuZXhwb3J0cz17XG4gIFwibmFtZVwiOiBcImNoYXQtZW5naW5lLW9wZW4tZ3JhcGhcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMC4wLjFcIixcbiAgXCJtYWluXCI6IFwic3JjL3BsdWdpbi5qc1wiLFxuICBcInJlcG9zaXRvcnlcIjoge1xuICAgIFwidHlwZVwiOiBcImdpdFwiLFxuICAgIFwidXJsXCI6IFwiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9wdWJudWIvY2hhdC1lbmdpbmUtb3Blbi1ncmFwaC5naXRcIlxuICB9LFxuICBcImtleXdvcmRzXCI6IFtcbiAgICBcInB1Ym51YlwiLFxuICAgIFwiY2hhdC1lbmdpbmVcIixcbiAgICBcIm9wZW4tZ3JhcGhcIixcbiAgICBcInJlYWx0aW1lXCJcbiAgXSxcbiAgXCJhdXRob3JcIjogXCJNYW51ZWwgRmVybmFuZG9cIixcbiAgXCJidWdzXCI6IHtcbiAgICBcInVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9wdWJudWIvY2hhdC1lbmdpbmUtb3Blbi1ncmFwaC9pc3N1ZXNcIlxuICB9LFxuICBcImhvbWVwYWdlXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL3B1Ym51Yi9jaGF0LWVuZ2luZS1vcGVuLWdyYXBoI3JlYWRtZVwiLFxuICBcImJyb3dzZXJpZnlcIjoge1xuICAgIFwidHJhbnNmb3JtXCI6IFtcbiAgICAgIFtcbiAgICAgICAgXCJiYWJlbGlmeVwiLFxuICAgICAgICB7XG4gICAgICAgICAgXCJwcmVzZXRzXCI6IFtcbiAgICAgICAgICAgIFwiZXMyMDE1XCIsXG4gICAgICAgICAgICBcIm1pbmlmeVwiXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdXG4gICAgXVxuICB9LFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJiYWJlbC1jb3JlXCI6IFwiXjYuMjYuM1wiLFxuICAgIFwiYmFiZWwtbWluaWZ5XCI6IFwiXjAuNC4zXCIsXG4gICAgXCJiYWJlbC1wcmVzZXQtZXMyMDE1XCI6IFwiXjYuMjQuMVwiLFxuICAgIFwiYmFiZWxpZnlcIjogXCJeOC4wLjBcIlxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChjb25maWcpID0+IHtcblxuICBjb25zdCB7IGFwaSA9ICh1cmwpID0+IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvP3E9JHt1cmx9YCB9ID0gY29uZmlnO1xuXG4gIGNvbnN0IHJlZ2V4ID0gLyhodHRwfGh0dHBzKVxcOlxcL1xcL1thLXpBLVowLTlcXC1cXC5dK1xcLlthLXpBLVpdezIsM30oXFwvXFxTKik/LztcblxuICByZXR1cm4ge1xuICAgIG1pZGRsZXdhcmU6IHtcbiAgICAgIG9uOiB7XG4gICAgICAgIG1lc3NhZ2U6IGZ1bmN0aW9uIChwYXlsb2FkLCBuZXh0KSB7XG4gICAgICAgICAgbGV0IHIgPSBwYXlsb2FkLmRhdGEudGV4dC5tYXRjaChyZWdleCk7XG4gICAgICAgICAgaWYgKHIgJiYgci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXF1ZXN0KGFwaShlbmNvZGVVUkkoclswXSkpLCAnR0VUJywge1xuICAgICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonXG4gICAgICAgICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmRhdGEudGV4dCA9IHBheWxvYWQuZGF0YS50ZXh0LnJlcGxhY2UocmVnZXgsICcnKTtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmRhdGEubWV0YWRhdGEgPSByZXMuYm9keTtcbiAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXh0KG51bGwsIHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIG1ha2UgYW4gSFRUUCByZXF1ZXN0IHdyYXBwZWQgaW4gYW4gRVM2IFByb21pc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybCBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkLlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCBQT1NULCBHRVQsIFBVVCwgZXRjLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgSlNPTiBPYmplY3Qgd2l0aCBIVFRQIHJlcXVlc3Qgb3B0aW9ucywgXCJoZWFkZXJcIlxuICogICAgIE9iamVjdCBvZiBwb3NzaWJsZSBoZWFkZXJzIHRvIHNldCwgYW5kIGEgYm9keSBPYmplY3Qgb2YgYSByZXF1ZXN0IGJvZHkuXG4gKlxuICogQHJldHVybiB7UHJvbWlzZX0gUmVzb2x2ZXMgYSBwYXJzZWQgSlNPTiBPYmplY3Qgb3IgU3RyaW5nIHJlc3BvbnNlIHRleHQgaWZcbiAqICAgICB0aGUgcmVzcG9uc2UgY29kZSBpcyBpbiB0aGUgMjAwIHJhbmdlLiBSZWplY3RzIHdpdGggcmVzcG9uc2Ugc3RhdHVzIHRleHRcbiAqICAgICB3aGVuIHRoZSByZXNwb25zZSBjb2RlIGlzIG91dHNpZGUgb2YgdGhlIDIwMCByYW5nZS5cbiAqL1xuZnVuY3Rpb24gcmVxdWVzdCh1cmwsIG1ldGhvZCwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICBsZXQgY29udGVudFR5cGVJc1NldCA9IGZhbHNlO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuXG4gICAgICAgIGZvciAobGV0IGhlYWRlciBpbiBvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMuaGVhZGVycywgaGVhZGVyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IGhlYWRlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlSXNTZXQgPSBoZWFkZXIgPT09ICdjb250ZW50LXR5cGUnID8gdHJ1ZSA6IGNvbnRlbnRUeXBlSXNTZXQ7XG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLCBvcHRpb25zLmhlYWRlcnNbaGVhZGVyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRlbnRUeXBlSXNTZXQpIHtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHkpKTtcbiAgICB9KTtcbn1cbiJdfQ==
