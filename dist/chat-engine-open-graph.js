(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';(function(){var a=require('../package.json');window.ChatEngineCore.plugin[a.name]=require('../src/plugin.js')})();

},{"../package.json":2,"../src/plugin.js":3}],2:[function(require,module,exports){
module.exports={
  "name": "chat-engine-open-graph",
  "version": "0.0.3",
  "main": "src/plugin.js",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/pubnub/chat-engine-open-graph.git"
  },
  "keywords": [
    "pubnub",
    "chat-engine",
    "open-graph",
    "realtime"
  ],
  "author": "Manuel Fernando",
  "bugs": {
    "url": "https://github.com/pubnub/chat-engine-open-graph/issues"
  },
  "homepage": "https://github.com/pubnub/chat-engine-open-graph#readme",
  "browserify": {
    "transform": [
      [
        "babelify",
        {
          "presets": [
            "es2015",
            "minify"
          ]
        }
      ]
    ]
  },
  "devDependencies": {
    "babel-core": "^6.26.3",
    "babel-minify": "^0.4.3",
    "babel-preset-es2015": "^6.24.1",
    "babelify": "^8.0.0"
  }
}

},{}],3:[function(require,module,exports){
'use strict';module.exports=function(a){var b=a.api,c=b===void 0?function(a){return'http://localhost:3001/?q='+a}:b,d=/(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/;return{middleware:{on:{message:function f(a,b){var e=a.data.text.match(d);e&&0<e.length&&request(c(e[0]),'GET',{"Access-Control-Allow-Origin":'*'}).then(function(b){a.data.text=a.data.text.replace(d,''),a.data.metadata=b.hybridGraph}).catch(function(){}),b(null,a)}}}}};function request(a,b,c){return new Promise(function(d,e){var f=new XMLHttpRequest,g=!1;for(var h in c=c||{},f.open(b,a),c.headers)({}).hasOwnProperty.call(c.headers,h)&&(h=h.toLowerCase(),g='content-type'===h||g,f.setRequestHeader(h,c.headers[h]));g||f.setRequestHeader('Content-type','application/x-www-form-urlencoded'),f.onload=function(){if(200<=f.status&&300>f.status){var a;try{a=JSON.parse(f.response)}catch(b){a=f.response}d(a)}else e({status:f.status,statusText:f.statusText})},f.send(JSON.stringify(c.body))})}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL2NoYXQtZW5naW5lLXBsdWdpbi9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiLnRtcC93cmFwLmpzIiwicGFja2FnZS5qc29uIiwic3JjL3BsdWdpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTthQ0FBLENBQUMsVUFBVyxDQUVSLEdBQU0sR0FBTSxRQUFRLGlCQUFSLENBQVosQ0FDQSxPQUFPLGNBQVAsQ0FBc0IsTUFBdEIsQ0FBNkIsRUFBSSxJQUFqQyxFQUF5QyxRQUFRLGtCQUFSLENBRTVDLENBTEQsRzs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2FDdkNBLE9BQU8sT0FBUCxDQUFpQixTQUFDLENBQUQsQ0FBWSxPQUVrQyxDQUZsQyxDQUVuQixHQUZtQixDQUVuQixDQUZtQixZQUViLFNBQUMsQ0FBRCxvQ0FBcUMsQ0FBckMsQ0FGYSxHQUlyQixFQUFRLDJEQUphLENBTTNCLE1BQU8sQ0FDTCxXQUFZLENBQ1YsR0FBSSxDQUNGLFFBQVMsV0FBVSxDQUFWLENBQW1CLENBQW5CLENBQXlCLENBQ2hDLEdBQUksR0FBSSxFQUFRLElBQVIsQ0FBYSxJQUFiLENBQWtCLEtBQWxCLENBQXdCLENBQXhCLENBQVIsQ0FDSSxHQUFnQixDQUFYLEdBQUUsTUFGcUIsRUFHOUIsUUFBUSxFQUFJLEVBQUUsQ0FBRixDQUFKLENBQVIsQ0FBbUIsS0FBbkIsQ0FBMEIsQ0FDeEIsOEJBQStCLEdBRFAsQ0FBMUIsRUFFRyxJQUZILENBRVEsU0FBQyxDQUFELENBQVMsQ0FDYixFQUFRLElBQVIsQ0FBYSxJQUFiLENBQW9CLEVBQVEsSUFBUixDQUFhLElBQWIsQ0FBa0IsT0FBbEIsQ0FBMEIsQ0FBMUIsQ0FBaUMsRUFBakMsQ0FEUCxDQUViLEVBQVEsSUFBUixDQUFhLFFBQWIsQ0FBd0IsRUFBSSxXQUMvQixDQUxELEVBS0csS0FMSCxDQUtTLFVBQVcsQ0FFbkIsQ0FQRCxDQUg4QixDQVloQyxFQUFLLElBQUwsQ0FBVyxDQUFYLENBQ0QsQ0FkQyxDQURNLENBRFAsQ0FvQlIsQyxDQWNELFFBQVMsUUFBVCxDQUFpQixDQUFqQixDQUFzQixDQUF0QixDQUE4QixDQUE5QixDQUF1QyxDQUNuQyxNQUFPLElBQUksUUFBSixDQUFZLFNBQUMsQ0FBRCxDQUFVLENBQVYsQ0FBcUIsSUFDOUIsR0FBTSxHQUFJLGVBRG9CLENBRWhDLElBRmdDLENBTXBDLElBQUssR0FBSSxFQUFULEdBSEEsR0FBVSxHQUFXLEVBR3JCLENBRkEsRUFBSSxJQUFKLENBQVMsQ0FBVCxDQUFpQixDQUFqQixDQUVBLENBQW1CLEVBQVEsT0FBM0IsQ0FDUSxLQUFHLGNBQUgsQ0FBa0IsSUFBbEIsQ0FBdUIsRUFBUSxPQUEvQixDQUF3QyxDQUF4QyxDQURSLEdBRVEsRUFBUyxFQUFPLFdBQVAsRUFGakIsQ0FHUSxFQUE4QixjQUFYLElBQW5CLEVBQXNELENBSDlELENBSVEsRUFBSSxnQkFBSixDQUFxQixDQUFyQixDQUE2QixFQUFRLE9BQVIsQ0FBZ0IsQ0FBaEIsQ0FBN0IsQ0FKUixFQVFLLENBZCtCLEVBZWhDLEVBQUksZ0JBQUosQ0FBcUIsY0FBckIsQ0FBcUMsbUNBQXJDLENBZmdDLENBa0JwQyxFQUFJLE1BQUosQ0FBYSxVQUFXLENBQ3BCLEdBQWtCLEdBQWQsSUFBSSxNQUFKLEVBQWtDLEdBQWIsR0FBSSxNQUE3QixDQUEyQyxDQUN2QyxHQUFJLEVBQUosQ0FDQSxHQUFJLENBQ0EsRUFBVyxLQUFLLEtBQUwsQ0FBVyxFQUFJLFFBQWYsQ0FDZCxDQUFDLE1BQU8sQ0FBUCxDQUFVLENBQ1IsRUFBVyxFQUFJLFFBQ2xCLENBQ0QsRUFBUSxDQUFSLENBQ0gsQ0FSRCxJQVNJLEdBQU8sQ0FDSCxPQUFRLEVBQUksTUFEVCxDQUVILFdBQVksRUFBSSxVQUZiLENBQVAsQ0FLUCxDQWpDbUMsQ0FtQ3BDLEVBQUksSUFBSixDQUFTLEtBQUssU0FBTCxDQUFlLEVBQVEsSUFBdkIsQ0FBVCxDQUNILENBcENNLENBcUNWIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgY29uc3QgcGtnID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJyk7XG4gICAgd2luZG93LkNoYXRFbmdpbmVDb3JlLnBsdWdpbltwa2cubmFtZV0gPSByZXF1aXJlKCcuLi9zcmMvcGx1Z2luLmpzJyk7XG5cbn0pKCk7XG4iLCJtb2R1bGUuZXhwb3J0cz17XG4gIFwibmFtZVwiOiBcImNoYXQtZW5naW5lLW9wZW4tZ3JhcGhcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMC4wLjNcIixcbiAgXCJtYWluXCI6IFwic3JjL3BsdWdpbi5qc1wiLFxuICBcInJlcG9zaXRvcnlcIjoge1xuICAgIFwidHlwZVwiOiBcImdpdFwiLFxuICAgIFwidXJsXCI6IFwiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9wdWJudWIvY2hhdC1lbmdpbmUtb3Blbi1ncmFwaC5naXRcIlxuICB9LFxuICBcImtleXdvcmRzXCI6IFtcbiAgICBcInB1Ym51YlwiLFxuICAgIFwiY2hhdC1lbmdpbmVcIixcbiAgICBcIm9wZW4tZ3JhcGhcIixcbiAgICBcInJlYWx0aW1lXCJcbiAgXSxcbiAgXCJhdXRob3JcIjogXCJNYW51ZWwgRmVybmFuZG9cIixcbiAgXCJidWdzXCI6IHtcbiAgICBcInVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9wdWJudWIvY2hhdC1lbmdpbmUtb3Blbi1ncmFwaC9pc3N1ZXNcIlxuICB9LFxuICBcImhvbWVwYWdlXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL3B1Ym51Yi9jaGF0LWVuZ2luZS1vcGVuLWdyYXBoI3JlYWRtZVwiLFxuICBcImJyb3dzZXJpZnlcIjoge1xuICAgIFwidHJhbnNmb3JtXCI6IFtcbiAgICAgIFtcbiAgICAgICAgXCJiYWJlbGlmeVwiLFxuICAgICAgICB7XG4gICAgICAgICAgXCJwcmVzZXRzXCI6IFtcbiAgICAgICAgICAgIFwiZXMyMDE1XCIsXG4gICAgICAgICAgICBcIm1pbmlmeVwiXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdXG4gICAgXVxuICB9LFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJiYWJlbC1jb3JlXCI6IFwiXjYuMjYuM1wiLFxuICAgIFwiYmFiZWwtbWluaWZ5XCI6IFwiXjAuNC4zXCIsXG4gICAgXCJiYWJlbC1wcmVzZXQtZXMyMDE1XCI6IFwiXjYuMjQuMVwiLFxuICAgIFwiYmFiZWxpZnlcIjogXCJeOC4wLjBcIlxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChjb25maWcpID0+IHtcblxuICBjb25zdCB7IGFwaSA9ICh1cmwpID0+IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvP3E9JHt1cmx9YCB9ID0gY29uZmlnO1xuXG4gIGNvbnN0IHJlZ2V4ID0gLyhodHRwfGh0dHBzKVxcOlxcL1xcL1thLXpBLVowLTlcXC1cXC5dK1xcLlthLXpBLVpdezIsM30oXFwvXFxTKik/LztcblxuICByZXR1cm4ge1xuICAgIG1pZGRsZXdhcmU6IHtcbiAgICAgIG9uOiB7XG4gICAgICAgIG1lc3NhZ2U6IGZ1bmN0aW9uIChwYXlsb2FkLCBuZXh0KSB7XG4gICAgICAgICAgbGV0IHIgPSBwYXlsb2FkLmRhdGEudGV4dC5tYXRjaChyZWdleCk7XG4gICAgICAgICAgaWYgKHIgJiYgci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXF1ZXN0KGFwaShyWzBdKSwgJ0dFVCcsIHtcbiAgICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJ1xuICAgICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5kYXRhLnRleHQgPSBwYXlsb2FkLmRhdGEudGV4dC5yZXBsYWNlKHJlZ2V4LCAnJyk7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5kYXRhLm1ldGFkYXRhID0gcmVzLmh5YnJpZEdyYXBoO1xuICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHQobnVsbCwgcGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gbWFrZSBhbiBIVFRQIHJlcXVlc3Qgd3JhcHBlZCBpbiBhbiBFUzYgUHJvbWlzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsIFVSTCBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQuXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIFBPU1QsIEdFVCwgUFVULCBldGMuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBKU09OIE9iamVjdCB3aXRoIEhUVFAgcmVxdWVzdCBvcHRpb25zLCBcImhlYWRlclwiXG4gKiAgICAgT2JqZWN0IG9mIHBvc3NpYmxlIGhlYWRlcnMgdG8gc2V0LCBhbmQgYSBib2R5IE9iamVjdCBvZiBhIHJlcXVlc3QgYm9keS5cbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlfSBSZXNvbHZlcyBhIHBhcnNlZCBKU09OIE9iamVjdCBvciBTdHJpbmcgcmVzcG9uc2UgdGV4dCBpZlxuICogICAgIHRoZSByZXNwb25zZSBjb2RlIGlzIGluIHRoZSAyMDAgcmFuZ2UuIFJlamVjdHMgd2l0aCByZXNwb25zZSBzdGF0dXMgdGV4dFxuICogICAgIHdoZW4gdGhlIHJlc3BvbnNlIGNvZGUgaXMgb3V0c2lkZSBvZiB0aGUgMjAwIHJhbmdlLlxuICovXG5mdW5jdGlvbiByZXF1ZXN0KHVybCwgbWV0aG9kLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGxldCBjb250ZW50VHlwZUlzU2V0ID0gZmFsc2U7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCk7XG5cbiAgICAgICAgZm9yIChsZXQgaGVhZGVyIGluIG9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucy5oZWFkZXJzLCBoZWFkZXIpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgY29udGVudFR5cGVJc1NldCA9IGhlYWRlciA9PT0gJ2NvbnRlbnQtdHlwZScgPyB0cnVlIDogY29udGVudFR5cGVJc1NldDtcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIG9wdGlvbnMuaGVhZGVyc1toZWFkZXJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGVudFR5cGVJc1NldCkge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSkpO1xuICAgIH0pO1xufVxuIl19
